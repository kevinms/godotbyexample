<html>

<head>
	<title>Godot By Example</title>
</head>

<body>
	<div>
		<svg width="600" height="400"></svg>
	</div>
</body>

<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<script>
let data = [], width = 600, height = 400, numPoints = 10;

let drag = d3.drag()
	.on('drag', handleDrag);

function handleDrag(e) {
	e.subject.x = e.x;
	e.subject.y = e.y;
	update();
}

function initDrag() {
	d3.select('svg')
		.selectAll('circle')
		.call(drag);
}

function updateData() {
	data = [];
	for(let i=0; i<numPoints; i++) {
		data.push({
			id: i,
			x: Math.random() * width,
			y: Math.random() * height
		});
	}
}

function update() {
	d3.select('svg')
		.selectAll('circle')
		.data(data)
		.join('circle')
		.attr('cx', function(d) { return d.x; })
		.attr('cy', function(d) { return d.y; })
		.attr('r', 40);
}

updateData();
update();
initDrag();

</script>

</html>
